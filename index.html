<!DOCTYPE html>
<html lang="sk">
  <head>
    <meta charset="utf-8" />
    <title>VES Render</title>
    <link rel="stylesheet" href="style.css" />
  </head>

  <script src="main.js"></script>

  <script>
    document.querySelector('.render-btn').addEventListener('click', () => {
      const code = document.querySelector('.text-area').value;
  
      fetch('/render', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({ code })
      })
      .then(response => response.json())
      .then(data => {
        const img = document.querySelector('.center-image');
        img.src = 'data:image/png;base64,' + data.image;
      })
      .catch(error => console.error('Chyba pri renderovaní:', error));
    });
  </script>
  
  <body>
    <div class="desktop">
      <div class="div">
        <div class="header">
          <div class="gear-shape"></div>
          <p class="VES-RENDER">
            <span class="text-bold">VES</span><br /><span class="text-light">RENDER</span>
          </p>
        </div>
        
        <div class="rectangle-left">
          <textarea class="text-area" placeholder="Sem zadajte text..."></textarea>
        </div>
        
        <div class="rectangle-center">
          <img class="center-image" src="path-to-your-image.jpg" alt="Render Image" />
        </div>

        <div class="text-wrapper-2">Vyberte si filter:</div>
        
        <button class="filter-button" style="top: 190px">
          <span>ORIGINAL</span><div class="arrow"></div>
        </button>
        <button class="filter-button" style="top: 250px">
          <span>BLUR</span><div class="arrow"></div>
        </button>
        <button class="filter-button" style="top: 310px">
          <span>INVERTED</span><div class="arrow"></div>
        </button>
        <button class="filter-button" style="top: 370px">
          <span>GREYSCALE</span><div class="arrow"></div>
        </button>
        <button class="filter-button" style="top: 430px">
          <span>COLORBLIND</span><div class="arrow"></div>
        </button>

        <div class="ves-label">Sem vlož VES kód:</div>
      
        <button class="render-btn">
          <span>RENDER</span>
          <div class="arrow"></div>
        </button>

        <p class="footer">© Project by Michaela, Ondrej, Pavol</p>
      </div>
    </div>
    <script>
  document.addEventListener("DOMContentLoaded", function () {
    document.querySelector('.render-btn').addEventListener('click', async () => {
      const vesCode = document.querySelector('.text-area').value;
    
      const activeFilterBtn = document.querySelector('.filter-button.active');
      const filter = activeFilterBtn ? activeFilterBtn.textContent.trim() : 'ORIGINAL';
    
      try {
        const response = await fetch('/render', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            code: vesCode,
            filter: filter
          })
        });
    
        if (!response.ok) {
          throw new Error('Nepodarilo sa načítať obrázok');
        }
    
        const data = await response.json();
        document.querySelector('.center-image').src = 'data:image/png;base64,' + data.image;
      } catch (error) {
        console.error('Chyba pri renderovaní:', error);
      }
    });
  
    document.querySelectorAll('.filter-button').forEach(button => {
      button.addEventListener('click', () => {
        document.querySelectorAll('.filter-button').forEach(btn => btn.classList.remove('active'));
        button.classList.add('active');
      });
    });
  });
</script>
  </body>
</html>












